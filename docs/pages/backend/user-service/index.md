# **Сервис пользователей**

**Описание:**

Сервис пользователей является ключевым компонентом системы, предоставляющим функционал управления учетными записями пользователей, авторизации, работы с JWT токенами, а также взаимодействия с базой данных. Он разработан с использованием современных технологий, таких как **FastAPI**, и следует принципам микросервисной архитектуры.

Сервис ориентирован на высокую производительность, безопасность и простоту интеграции с другими компонентами системы.

Архитектурный стиль: REST API
Язык разработки: Python
Фреймворк: FastAPI
База данных: YDB (Yandex Database)
Авторизация: JWT (JSON Web Tokens)
Логирование: Loguru

---

## **Описание сервиса**

**Основные возможности:**

- **Авторизация пользователей** через популярные провайдеры, включая **Yandex** и **Telegram**.
- **Управление учетными записями**: регистрация, обновление данных, удаление, восстановление.
- Работа с **JWT токенами**: генерация, проверка, валидация.
- **Отправка уведомлений** пользователям.
- **Обработка запросов на изменение ролей и прав доступа**.
- Интеграция с **OAuth2** для обеспечения безопасного входа через сторонние сервисы.

**Технические особенности:**

- Разработан с использованием **Python** и **FastAPI**.
- База данных: **PostgreSQL**, для кэширования используется **Redis**.
- Работа с асинхронными запросами через **aiohttp**.
- Поддержка конфигурации через файл `config.yaml`.

**Основные компоненты:**

1. **Модели данных** — описывают структуру хранимой информации (пользователи, уведомления, запросы).
2. **Сервисы** — содержат бизнес-логику приложения.
3. **Репозитории** — реализуют взаимодействие с базой данных.
4. **Модуль CryptoManager** — обеспечивает безопасность операций с JWT токенами и шифрование данных.
5. **Unit of Work (UoW)** — управляет транзакциями и обеспечивает атомарность операций.

**Архитектурные паттерны:**

- **Repository** для абстрагирования работы с данными.
- **Unit of Work** для управления транзакциями.
- **Dependency Injection** для гибкости и тестируемости.

**Пользовательский сценарий:**

1. Пользователь регистрируется или входит через сторонний сервис.
2. Получает JWT токен, который используется для последующей авторизации.
3. Выполняет действия, такие как изменение профиля, просмотр уведомлений, отправка запросов.
4. Администраторы могут управлять ролями пользователей и принимать решения по запросам.